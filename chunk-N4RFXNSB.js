import{a as F,b as N,e as P}from"./chunk-WLWZDWSS.js";import{Bb as T,Ga as y,eb as w,gb as E,h as J,hb as d,ib as Z,jb as f,k as S,kb as M,nb as _,pb as $,qb as I,rb as D,tb as R,vb as g,xb as k,yb as z}from"./chunk-HSTOVIFH.js";import{Cb as v,Db as q,Fb as U,Gb as j,Hb as n,Ib as i,Jb as p,Qb as h,Sb as C,Vb as B,cb as a,cc as m,db as G,dc as x,ec as O,jc as u,ka as l,oa as c,tb as b,xb as s}from"./chunk-SDDR3OHE.js";import"./chunk-JNZ5WLPA.js";import"./chunk-ACKELEN3.js";var A=class o{fb=l(R);accountService=l(F);router=l(S);activatedRoute=l(J);snack=l(w);returnUrl="/";constructor(){let r=this.activatedRoute.snapshot.queryParams.returnUrl;r&&(this.returnUrl=r)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value.email,this.loginForm.value.password).then(()=>this.router.navigateByUrl(this.returnUrl)).catch(r=>{var e=r,t;switch(e.code){case"auth/user-not-found":t="Die E-Mail wurde noch nicht registriert.";break;case"auth/wrong-password":t="Das eingegebene Passwort ist nicht korrekt.";break;default:t=e.message;break}this.snack.error(t)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-login"]],standalone:!0,features:[u],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,t){e&1&&(n(0,"mat-card",0)(1,"form",1),h("ngSubmit",function(){return t.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Login"),i()(),n(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email address"),i(),p(8,"input",5),i(),n(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),i(),p(12,"input",6),i(),n(13,"button",7),m(14,"Sign in"),i()()()),e&2&&(a(),s("formGroup",t.loginForm))},dependencies:[g,_,E,f,M,I,D,N,T,P,k,y]})};function X(o,r){if(o&1&&(n(0,"mat-error"),m(1),i()),o&2){let e=C();a(),O("",e.label," is required")}}function Y(o,r){o&1&&(n(0,"mat-error"),m(1,"Email is invalid"),i())}var L=class o{constructor(r){this.controlDir=r;this.controlDir.valueAccessor=this}label="";type="text";writeValue(r){}registerOnChange(r){}registerOnTouched(r){}get control(){return this.controlDir.control}static \u0275fac=function(e){return new(e||o)(G(Z,2))};static \u0275cmp=c({type:o,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[u],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(e,t){e&1&&(n(0,"mat-form-field",0)(1,"mat-label"),m(2),i(),p(3,"input",1),b(4,X,2,1,"mat-error")(5,Y,2,0,"mat-error"),i()),e&2&&(a(2),x(t.label),a(),B("type",t.type),B("placeholder",t.label),s("formControl",t.control),a(),v(t.control.hasError("required")?4:-1),a(),v(t.control.hasError("email")?5:-1))},dependencies:[g,E,f,$,T,P,z,k]})};function ee(o,r){if(o&1&&(n(0,"li"),m(1),i()),o&2){let e=r.$implicit;a(),x(e)}}function te(o,r){if(o&1&&(n(0,"div",8)(1,"ul",10),U(2,ee,2,1,"li",null,q),i()()),o&2){let e=C();a(2),j(e.validationErrors)}}var V=class o{fb=l(R);accountService=l(F);router=l(S);snack=l(w);validationErrors;registerForm=this.fb.group({firstName:["",d.required],lastName:["",d.required],email:["",[d.required,d.email]],password:["",d.required]});onSubmit(){this.accountService.register(this.registerForm.value.email,this.registerForm.value.password).then(r=>this.accountService.createUser(r,this.registerForm.value.email,this.registerForm.value.firstName,this.registerForm.value.lastName)).then(()=>this.router.navigateByUrl("/account/login")).then(()=>this.snack.success("Registrierung erfolgreich")).catch(r=>{var e=r,t;switch(e.code){case"auth/email-already-in-use":t="Die E-Mail wurde bereits registriert.";break;case"auth/weak-password":t="Das Passwort muss mindestens 6 Zeichen Beinhalten.";break;default:t=e.message;break}this.snack.error(t)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-register"]],standalone:!0,features:[u],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","Vorname","formControlName","firstName"],["label","Nachname","formControlName","lastName"],["label","E-Mail Adresse","formControlName","email"],["label","Passwort","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(e,t){e&1&&(n(0,"mat-card",0)(1,"form",1),h("ngSubmit",function(){return t.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Register"),i()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),b(9,te,4,0,"div",8),n(10,"button",9),m(11,"Register"),i()()()),e&2&&(a(),s("formGroup",t.registerForm),a(8),v(t.validationErrors?9:-1),a(),s("disabled",t.registerForm.invalid))},dependencies:[g,_,f,M,I,D,N,y,L]})};var ke=[{path:"login",component:A},{path:"register",component:V}];export{ke as accountRoutes};
